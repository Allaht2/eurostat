<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Downloads either a simple features (sf),
SpatialPolygonDataFrame or a data_frame preprocessed using broom::tidy()."><title>Download Geospatial Data from GISCO — get_eurostat_geospatial • eurostat</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Roboto_Mono-0.4.4/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download Geospatial Data from GISCO — get_eurostat_geospatial"><meta property="og:description" content="Downloads either a simple features (sf),
SpatialPolygonDataFrame or a data_frame preprocessed using broom::tidy()."><meta property="og:image" content="https://ropengov.github.io/eurostat/logo.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rOpenGov"><meta name="twitter:site" content="@rOpenGov"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=B612+Mono&amp;display=swap" rel="stylesheet"><!-- rogtemplate style sheet --><link href="../BS5/rogtemplate.css" rel="stylesheet"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">eurostat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.7.12</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/blogposts.html">Blog posts</a>
    <a class="dropdown-item" href="../articles/cheatsheet.html">Cheat sheet: eurostat R package</a>
    <a class="dropdown-item" href="../articles/eurostat_tutorial.html">Tutorial for the eurostat R package</a>
    <a class="dropdown-item" href="../articles/mapping.html">Mapping Regional Data, Mapping Metadata Problems</a>
    <a class="dropdown-item" href="../articles/maps.html">Map examples for the eurostat R package</a>
    <a class="dropdown-item" href="../articles/publications.html">Publications using the eurostat R package</a>
    <a class="dropdown-item" href="../articles/vignette.html">Vignette for the eurostat R package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rOpenGov/eurostat/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Download Geospatial Data from GISCO</h1>
      <small class="dont-index">Source: <a href="https://github.com/rOpenGov/eurostat/blob/HEAD/R/get_eurostat_geospatial.R" class="external-link"><code>R/get_eurostat_geospatial.R</code></a></small>
      <div class="d-none name"><code>get_eurostat_geospatial.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Downloads either a simple features (sf),
SpatialPolygonDataFrame or a data_frame preprocessed using <code><a href="https://broom.tidymodels.org/reference/reexports.html" class="external-link">broom::tidy()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_eurostat_geospatial</span><span class="op">(</span></span>
<span>  output_class <span class="op">=</span> <span class="st">"sf"</span>,</span>
<span>  resolution <span class="op">=</span> <span class="st">"60"</span>,</span>
<span>  nuts_level <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  year <span class="op">=</span> <span class="st">"2016"</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  update_cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cache_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crs <span class="op">=</span> <span class="st">"4326"</span>,</span>
<span>  make_valid <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="source">Source<a class="anchor" aria-label="anchor" href="#source"></a></h2>
    <p>Data source: Eurostat</p>
<p>© EuroGeographics for the administrative boundaries</p>
<p>Data downloaded from: <a href="https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/administrative-units-statistical-units" class="external-link">https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/administrative-units-statistical-units</a></p>
    </div>
    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>output_class</dt>
<dd><p>A string. Class of object returned,
either <code>sf</code> <code>simple features</code>, <code>df</code> (<code>data_frame</code>) or
<code>spdf</code> (<code>SpatialPolygonDataFrame</code>)</p></dd>


<dt>resolution</dt>
<dd><p>Resolution of the geospatial data. One of</p><ul><li><p>"60" (1:60million),</p></li>
<li><p>"20" (1:20million)</p></li>
<li><p>"10" (1:10million)</p></li>
<li><p>"03" (1:3million) or</p></li>
<li><p>"01" (1:1million).</p></li>
</ul></dd>


<dt>nuts_level</dt>
<dd><p>Level of NUTS classification of the geospatial data. One of
"0", "1", "2", "3" or "all" (mimics the original behaviour)</p></dd>


<dt>year</dt>
<dd><p>NUTS release year. One of
"2003", "2006", "2010", "2013", "2016" or "2021"</p></dd>


<dt>cache</dt>
<dd><p>a logical whether to do caching. Default is <code>TRUE</code>. Affects
only queries from the bulk download facility.</p></dd>


<dt>update_cache</dt>
<dd><p>a logical whether to update cache. Can be set also with
options(eurostat_update = TRUE)</p></dd>


<dt>cache_dir</dt>
<dd><p>a path to a cache directory. The directory have to exist.
The <code>NULL</code> (default) uses and creates
'eurostat' directory in the temporary directory from
<code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>. Directory can also be set with
<code>option</code> eurostat_cache_dir.</p></dd>


<dt>crs</dt>
<dd><p>projection of the map: 4-digit
<a href="https://spatialreference.org/ref/epsg/" class="external-link">EPSG code</a>. One of:</p><ul><li><p>"4326" - WGS84</p></li>
<li><p>"3035" - ETRS89 / ETRS-LAEA</p></li>
<li><p>"3857" - Pseudo-Mercator</p></li>
</ul></dd>


<dt>make_valid</dt>
<dd><p>logical; ensure that valid (multi-)polygon features are
returned if <code>output_class="sf"</code>, see Details. Current default
<code>FALSE</code>, will be changed in the future.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a sf, data_frame or SpatialPolygonDataFrame.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The data source URL is
<a href="https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/administrative-units-statistical-units" class="external-link">https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/administrative-units-statistical-units</a>.
The source provides feature collections as line strings (GeoJSON format),
not as (multi-)polygons which, in some cases, yields invalid
self-intersecting (multi-)polygon geometries (for some years/resolutions).
This can cause problems, e.g., when using these geometries as input argument
to <code><a href="https://r-spatial.github.io/sf/reference/interpolate_aw.html" class="external-link">sf::st_interpolate_aw()</a></code>. <code>make_valid = TRUE</code> makes sure that
only valid (multi-)polygons are returned, example included below.</p>
<p>The objects downloaded from GISCO should contain all or some of the
following variable columns:</p><ul><li><p><strong>id</strong>: JSON id code, the same as NUTS_ID. See NUTS_ID below for further clarification.</p></li>
<li><p><strong>LEVL_CODE</strong>: NUTS level code: 0 (national level), 1 (major socio-economic regions), 2 (basic regions for the application of regional policies) or 3 (small regions).</p></li>
<li><p><strong>NUTS_ID</strong>: NUTS ID code, consisting of country code and numbers (1 for NUTS 1, 2 for NUTS 2 and 3 for NUTS 3)</p></li>
<li><p><strong>CNTR_CODE</strong>: Country code: two-letter ISO code (ISO 3166 alpha-2), except in the case of Greece (EL).</p></li>
<li><p><strong>NAME_LATN</strong>: NUTS name in local language, transliterated to Latin script</p></li>
<li><p><strong>NUTS_NAME</strong>: NUTS name in local language, in local script.</p></li>
<li><p><strong>MOUNT_TYPE</strong>: Mountain typology for NUTS 3 regions.</p><ul><li><p>1: "where more than 50 % of the surface is covered by topographic mountain areas"</p></li>
<li><p>2: "in which more than 50 % of the regional population lives in topographic mountain areas"</p></li>
<li><p>3: "where more than 50 % of the surface is covered by topographic mountain areas and where more than 50 % of the regional population lives in these mountain areas"</p></li>
<li><p>4: non-mountain region / other region</p></li>
<li><p>0: no classification provided (e.g. in the case of NUTS 1 and NUTS 2 and non-EU countries)</p></li>
</ul></li>
<li><p><strong>URBN_TYPE</strong>: Urban-rural typology for NUTS 3 regions.</p><ul><li><p>1: predominantly urban region</p></li>
<li><p>2: intermediate region</p></li>
<li><p>3: predominantly rural region</p></li>
<li><p>0: no classification provided (e.g. in the case of NUTS 1 and NUTS 2 regions)</p></li>
</ul></li>
<li><p><strong>COAST_TYPE</strong>: Coastal typology for NUTS 3 regions.</p><ul><li><p>1: coastal (on coast)</p></li>
<li><p>2: coastal (&gt;= 50% of population living within 50km of the coastline)</p></li>
<li><p>3: non-coastal region</p></li>
<li><p>0: no classification provided (e.g. in the case of NUTS 1 and NUTS 2 regions)</p></li>
</ul></li>
<li><p><strong>FID</strong>: Same as NUTS_ID.</p></li>
<li><p><strong>geometry</strong>: geospatial information.</p></li>
<li><p><strong>geo</strong>: Same as NUTS_ID, added for for easier joins with dplyr. However, it is recommended to use other identical fields for this purpose.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>The following copyright notice is provided for end user convenience.
Please check up-to-date copyright information from the eurostat website:
<a href="https://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/administrative-units-statistical-units" class="external-link">GISCO: Geographical information and maps - Administrative units/statistical units</a></p>
<p>"In addition to the <a href="https://ec.europa.eu/eurostat/web/main/about/policies/copyright" class="external-link">general copyright and licence policy</a> applicable to the whole Eurostat website, the following specific provisions apply to the datasets you are downloading. The download and usage of these data is subject to the acceptance of the following clauses:</p><ol><li><p>The Commission agrees to grant the non-exclusive and not transferable
right to use and process the Eurostat/GISCO geographical data downloaded
from this page (the "data").</p></li>
<li><p>The permission to use the data is granted on condition that:</p><ol><li><p>the data will not be used for commercial purposes;</p></li>
<li><p>the source will be acknowledged. A copyright notice, as specified
below, will have to be visible on any printed or electronic publication
using the data downloaded from this page.</p></li>
</ol></li>
</ol><div class="section">
<h3 id="copyright-notice">Copyright notice<a class="anchor" aria-label="anchor" href="#copyright-notice"></a></h3>


<p>When data downloaded from this page is used in any printed or electronic
publication, in addition to any other provisions applicable to the whole
Eurostat website, data source will have to be acknowledged in the legend of
the map and in the introductory page of the publication with the following
copyright notice:</p>
<p>EN: © EuroGeographics for the administrative boundaries</p>
<p>FR: © EuroGeographics pour les limites administratives</p>
<p>DE: © EuroGeographics bezüglich der Verwaltungsgrenzen</p>
<p>For publications in languages other than English, French or German, the
translation of the copyright notice in the language of the publication shall
be used.</p>
<p>If you intend to use the data commercially, please contact EuroGeographics
for information regarding their licence agreements."</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other geospatial: 
<code><a href="eurostat_geodata_60_2016.html">eurostat_geodata_60_2016</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Markus Kainu <a href="mailto:markuskainu@gmail.com">markuskainu@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">sf</span> <span class="op">&lt;-</span> <span class="fu">get_eurostat_geospatial</span><span class="op">(</span></span></span>
<span class="r-in"><span>  output_class <span class="op">=</span> <span class="st">"sf"</span>,</span></span>
<span class="r-in"><span>  resolution <span class="op">=</span> <span class="st">"60"</span>,</span></span>
<span class="r-in"><span>  nuts_level <span class="op">=</span> <span class="st">"all"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required namespace: sf</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> sf at resolution 1:60 read from local file</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Default of 'make_valid' for 'output_class="sf"' will be changed in the future (see function details).</span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">get_eurostat_geospatial</span><span class="op">(</span></span></span>
<span class="r-in"><span>  output_class <span class="op">=</span> <span class="st">"df"</span>,</span></span>
<span class="r-in"><span>  resolution <span class="op">=</span> <span class="st">"20"</span>,</span></span>
<span class="r-in"><span>  nuts_level <span class="op">=</span> <span class="st">"0"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Object cached at /tmp/Rtmpga33yI/r_cache2/df20020164326.RData</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Regions defined for each Polygons</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining, by = "id"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> data_frame at resolution 1: 20  cached at:  /tmp/Rtmpga33yI/r_cache2/df20020164326.RData</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Default of 'make_valid' for 'output_class="sf"' will be changed in the future (see function details).</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">spdf</span> <span class="op">&lt;-</span> <span class="fu">get_eurostat_geospatial</span><span class="op">(</span></span></span>
<span class="r-in"><span>  output_class <span class="op">=</span> <span class="st">"spdf"</span>,</span></span>
<span class="r-in"><span>  resolution <span class="op">=</span> <span class="st">"10"</span>,</span></span>
<span class="r-in"><span>  nuts_level <span class="op">=</span> <span class="st">"3"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># -------------------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Minimal example to demonstrate reason/effect of 'make_valid = TRUE'</span></span></span>
<span class="r-in"><span><span class="co"># Spatial data set; rectangle spanning the entire globe with a constant value of 1L.</span></span></span>
<span class="r-in"><span><span class="co"># Requires the R package sf.</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://r-spatial.github.io/sf/" class="external-link">"sf"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">180</span>, <span class="op">-</span><span class="fl">90</span>, <span class="op">-</span><span class="fl">180</span>, <span class="fl">90</span>, <span class="fl">180</span>, <span class="fl">90</span>, <span class="fl">180</span>, <span class="op">-</span><span class="fl">90</span>, <span class="op">-</span><span class="fl">180</span>, <span class="op">-</span><span class="fl">90</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">poly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">d</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="va">poly</span><span class="op">)</span>, data <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  crs <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Causing an error: Self-intersection of some points of the geometry</span></span></span>
<span class="r-in"><span><span class="va">NUTS2_A</span> <span class="op">&lt;-</span> <span class="fu">get_eurostat_geospatial</span><span class="op">(</span><span class="st">"sf"</span>, <span class="fl">60</span>,</span></span>
<span class="r-in"><span>  nuts_level <span class="op">=</span> <span class="fl">2</span>, year <span class="op">=</span> <span class="fl">2013</span>,</span></span>
<span class="r-in"><span>  crs <span class="op">=</span> <span class="fl">4326</span>, make_valid <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/interpolate_aw.html" class="external-link">st_interpolate_aw</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">NUTS2_A</span>, extensive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="va">e</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Resolving the problem using</span></span></span>
<span class="r-in"><span><span class="co"># make_valid = TRUE. 'extensive = FALSE' returns</span></span></span>
<span class="r-in"><span><span class="co"># average over each area, thus resulting in a</span></span></span>
<span class="r-in"><span><span class="co"># constant value of 1 for each geometry in NUTS2_B.</span></span></span>
<span class="r-in"><span><span class="va">NUTS2_B</span> <span class="op">&lt;-</span> <span class="fu">get_eurostat_geospatial</span><span class="op">(</span><span class="st">"sf"</span>, <span class="fl">60</span>,</span></span>
<span class="r-in"><span>  nuts_level <span class="op">=</span> <span class="fl">2</span>, year <span class="op">=</span> <span class="fl">2013</span>,</span></span>
<span class="r-in"><span>  crs <span class="op">=</span> <span class="fl">4326</span>, make_valid <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/interpolate_aw.html" class="external-link">st_interpolate_aw</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">NUTS2_B</span>, extensive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Leo Lahti, Janne Huovari, Markus Kainu, Przemyslaw Biecek.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

    <!-- Add ropengov logo -->
  <script src="../BS5/logo.js"></script></body></html>

